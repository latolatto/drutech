<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drutech | Catalogue </title>
    <link rel="icon" type="image/x-icon" href="./assets/logo/DRUTECH LOGO1.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&family=Cinzel+Decorative:wght@400;700;900&family=Playfair+Display+SC:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="./styles.css" rel="stylesheet">
    <style>
        .inactiveLink {
   pointer-events: none;
   cursor: default;
}

.clicked {
        border: 2px solid black;
    }

    @media screen and (max-width: 576px){
.container, .container-sm {
    max-width: fit-content;
}
}


@media screen and (min-width: 576px) and (max-width: 767px){
.container, .container-sm {
    max-width: fit-content;
}
}

    </style>
  </head>
  <body>
    <div class="container"  >
      <div class=" fixed-top justify-content-md-center"id="menuja">
        <div class="nav-logo navbar-brand"><a class="  logo-href act-link" href="./index.html"><img class="main-logo"  src="./assets/logo/DRUTECH_LOGO.png" alt="logo"></a></div>
        <nav class="navbar  navbar-expand-lg  " >
          <div class="container-fluid justify-content-md-center" style="width:fit-content;">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon  "></span>
            </button>
            <div class="collapse navbar-collapse justify-content-md-center " id="navbarTogglerDemo03"  >
              <ul class="navbar-nav me-auto mb-2 mb-lg-0"  >
                <li class="nav-item">
                    <a class=" act-link nav-link  " id="nav-item" href="./about.html">ABOUT US </a>
                  </li>
                  <li class="nav-item">
                    <a class=" act-link nav-link  " id="nav-item" href="./catalogue.html">CATALOGUE </a>
                  </li>
                  <li class="nav-item">
                    <a class="act-link nav-link" href="./products.html"id="nav-item">OUR WORK</a>
                  </li>
                  <li class="nav-item " >
                    <a class="act-link nav-link" href="./contact.html"id="nav-item">CONTACT</a>
                  </li>
              </ul>
            </div>
          </div>
        </nav>  
        <li  class="email" style="list-style: none; justify-self: center;align-self: center;"><a class="email" href = "mailto: toshi.lazime@gmail.com" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#000000A6" class="bi bi-envelope-at" viewBox="0 0 16 16"> <path d="M2 2a2 2 0 0 0-2 2v8.01A2 2 0 0 0 2 14h5.5a.5.5 0 0 0 0-1H2a1 1 0 0 1-.966-.741l5.64-3.471L8 9.583l7-4.2V8.5a.5.5 0 0 0 1 0V4a2 2 0 0 0-2-2H2Zm3.708 6.208L1 11.105V5.383l4.708 2.825ZM1 4.217V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.217l-7 4.2-7-4.2Z"/> <path d="M14.247 14.269c1.01 0 1.587-.857 1.587-2.025v-.21C15.834 10.43 14.64 9 12.52 9h-.035C10.42 9 9 10.36 9 12.432v.214C9 14.82 10.438 16 12.358 16h.044c.594 0 1.018-.074 1.237-.175v-.73c-.245.11-.673.18-1.18.18h-.044c-1.334 0-2.571-.788-2.571-2.655v-.157c0-1.657 1.058-2.724 2.64-2.724h.04c1.535 0 2.484 1.05 2.484 2.326v.118c0 .975-.324 1.39-.639 1.39-.232 0-.41-.148-.41-.42v-2.19h-.906v.569h-.03c-.084-.298-.368-.63-.954-.63-.778 0-1.259.555-1.259 1.4v.528c0 .892.49 1.434 1.26 1.434.471 0 .896-.227 1.014-.643h.043c.118.42.617.648 1.12.648Zm-2.453-1.588v-.227c0-.546.227-.791.573-.791.297 0 .572.192.572.708v.367c0 .573-.253.744-.564.744-.354 0-.581-.215-.581-.8Z"/></svg> toshi.lazime@gmail.com</a> </li>
        <a href="#" id="cartIcon" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cart2" viewBox="0 0 16 16">
              <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l1.25 5h8.22l1.25-5zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
          </svg>
          <span class="badge position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning" id="cartItemCount" style="display: none;">0</span>
        </a>
        <div class="dropdown-menu" aria-labelledby="cartIcon">
          <div  id="cartDropdownMenu"></div>
          <hr id="dropdown-divider" class="dropdown-divider">
          <a id='viewCartLink'class="dropdown-item" href="cart.html">View Cart</a>
          <a id='checkoutLink'class="dropdown-item" href="checkout.html">Proceed to Checkout</a>
      </div>
    </div>
    <div class=" seksioni-2-catalogue grid   ">
      <div class="">      
         <div class="" >
             <div class="data">
                <span class="album-title-ballina  justify-content-center">DRUTECH'S CATALOGUE</span>
                  <div class="searchBar">
                      <input class="form-control me-2"   name="searchBar" type="text" id="searchBar" placeholder="Type to search..." aria-label="Search products">
                    </div>
             </div>
             <div class="body">
                 <div id="root"></div>
             </div>
          </div>
          <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel"><span id="itemName"></span></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body row">
                        <!-- First column with image -->
                        <div class="col-md-6 img-container">
                            <img src="" class="imagepreview " style="width: 100%;" >
                            <div class="magnifier" id="magnifier"></div>
                        </div>
                        <!-- Second column with description and order button -->
                        <div class="col-md-6 right-column">
                            <h6>Product Description:</h6>
                            <p id="prod-description"></p>
                            <div class="cart-div">
                              <input type="number" id="quantityInput" min="1" value="1" class="form-control mr-2">
                              <button class="btn btn-warning order-request-btn" >Add to Cart</button>
                            </div>
                            <span class="prod-disclaimer">*This website does not include online payment (yet)! <br>Instead, it sends us an order request that you made including your contact details, which we will use to reach out to you.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
      <div class="page-no" aria-label="Page navigation example">
         <ul class="pagination  sticky-bottom">
          <li class="page-item " >
            <a class="page-link pg-previous inactiveLink ">Previous</a>
           </li>
           <li class="page-item"><a class="page-link" href="#">1</a></li>
            <!-- <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li> -->
           <li class="page-item ">
             <a class="page-link pg-next inactiveLink "  href="#">Next</a>
           </li>
          </ul>
       </div>
       <div  class=" grid3 ">
        <footer class="  d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top" style="position:relative; ">
         <div class="footer-div col-md-4 d-flex align-items-center">
           <img class="footer-img" src="./assets/logo/DRUTECH LOGO1.svg" alt="logo"></img>
           <span class=" mb-md-0 text-body-secondary"> Â© <span id="year"> </span> Drutech</span>
         </div>
         <ul class=" socials  col-md-4  list-unstyled d-flex">
           <li class="ms-3"><a class="text-body-secondary" href="" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
             <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
             </svg></a>
            </li>
            <li class="ms-3"><a class="text-body-secondary" href="#" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
             <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>
             </svg></a>
            </li>
         </ul>
       </footer>
      </div>
     <script>document.getElementById("year").innerHTML = new Date().getFullYear();</script>
   </div>
   <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
   <script>





const container = document.querySelector('.img-container');
const image = document.querySelector('.imagepreview');
const magnifier = document.getElementById('magnifier');
const magnification = 1.2; // Adjust the magnification factor (lower value for less zoom)
const magnifierSize = 200; // Adjust the size of the magnifier

// Create a canvas element for drawing the zoomed area
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
canvas.width = magnifierSize;
canvas.height = magnifierSize;
magnifier.appendChild(canvas);

container.addEventListener('mousemove', e => {
    const { left, top, width, height } = container.getBoundingClientRect();
    const x = e.clientX - left;
    const y = e.clientY - top;

    const ratioX = image.naturalWidth / width;
    const ratioY = image.naturalHeight / height;

    const imageX = Math.round(x * ratioX);
    const imageY = Math.round(y * ratioY);

    const magnifierWidth = magnifier.offsetWidth;
    const magnifierHeight = magnifier.offsetHeight;

    const offsetX = magnifierWidth / 2;
    const offsetY = magnifierHeight / 2;

    // Clear previous content on the canvas
    ctx.clearRect(0, 0, magnifierSize, magnifierSize);

    // Draw the zoomed area of the image on the canvas
    ctx.drawImage(
        image,
        imageX - magnifierSize / (2 * magnification),
        imageY - magnifierSize / (2 * magnification),
        magnifierSize / magnification,
        magnifierSize / magnification,
        0,
        0,
        magnifierSize,
        magnifierSize
    );

    magnifier.style.display = 'block';
    magnifier.style.left = `${x - offsetX}px`;
    magnifier.style.top = `${y - offsetY}px`;
});

container.addEventListener('mouseleave', () => {
    magnifier.style.display = 'none';
});

// Make the magnifier circular
magnifier.style.borderRadius = '50%';
magnifier.style.overflow = 'hidden';


const product = [
    {
        id: 0,
        image: './assets/ballina-catalog/1.jpg',
        title: 'Z Flip Foldable Mobile',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 1,
        image: './assets/ballina-catalog/2.jpg',
        title: 'Air Pods Pro',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 2,
        image: './assets/ballina-catalog/3.jpg',
        title: '250D DSLR item',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 3,
        image: './assets/ballina-catalog/4.jpg',
        title: 'Headphones',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 4,
        image: './assets/ballina-catalog/5.jpg',
        title: 'Audio item',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 5,
        image: './assets/ballina-catalog/6.jpg',
        title: 'Smart Watch',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 6,
        image: './assets/ballina-catalog/7.jpg',
        title: 'gloves',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
    {
        id: 7,
        image: './assets/ballina-catalog/2.jpg',
        title: 'laptop',
        description:'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. ',
    },
];

// Function to display products
const displayItem = (items) => {
    const root = document.getElementById('root');
    root.innerHTML = ''; // Clear existing content
    items.forEach((item) => {
        const card = document.createElement('div');
        card.classList.add( 'ballina-col');
        card.innerHTML = `
                <a class="catg-item card-text pop" href="#" type="" data-bs-toggle="modal" data-bs-target="#myModal${item.id}" data-item-id="${item.id}">
                    <img class="album-img" src="${item.image}" alt="pieces">
                    <div class="img-ttl card-body" style="text-decoration: none;color:black;">
                        ${item.title}
                    </div>
                </a>`;
        root.appendChild(card);

        // Attach event listener to each card
        card.addEventListener('click', () => {
            const selectedItem = product.find(productItem => productItem.id === item.id);
            if (selectedItem) {
                // Populate modal with product data
                document.getElementById("exampleModalLabel").textContent = selectedItem.title;
                document.querySelector(".imagepreview").setAttribute("src", selectedItem.image);
                document.getElementById("prod-description").textContent = selectedItem.description;
                $('#myModal').modal('show'); // Show the modal
            }
        });
    });
};

// Initial display of all products
displayItem(product);

// Search functionality
document.getElementById('searchBar').addEventListener('keyup', (e) => {
    const searchData = e.target.value.trim().toLowerCase();
    const filteredData = product.filter(item => item.title.toLowerCase().includes(searchData));
    displayItem(filteredData);
});

$('.dropdown-toggle').dropdown();


// Initialize cart array to store added items
let cart = [];

// Add event listener to the "Add to Cart" buttons
const addToCartButtons = document.querySelectorAll('.order-request-btn');
addToCartButtons.forEach(button => {
    button.addEventListener('click', addToCartClicked);
});

// Load cart data from localStorage when the page loads
document.addEventListener('DOMContentLoaded', () => {
    const savedCart = localStorage.getItem('cart');
    if (savedCart) {
        cart = JSON.parse(savedCart);
        updateCartIcon(); // Update the cart icon when loading the saved cart data
    }
});

// Add an event listener to the cart icon to toggle the dropdown menu on click
const cartIcon = document.getElementById('cartIcon');
const dropdownMenu = document.getElementById('cartDropdown');

cartIcon.addEventListener('click', function() {
    if (dropdownMenu.classList.contains('show')) {
        dropdownMenu.classList.remove('show');
    } else {
        dropdownMenu.classList.add('show');
    }
}); 
// Function to handle the "Add to Cart" button click
function addToCartClicked(event) {
    // Identify the product
    const button = event.target;
    const productContainer = button.closest('.modal'); // Assuming the modal is a parent element
    const title = productContainer.querySelector('.modal-title').textContent;
    const imageSrc = productContainer.querySelector('.imagepreview').getAttribute('src');

    // Retrieve quantity
    const quantityInput = productContainer.querySelector('#quantityInput');
    const quantity = parseInt(quantityInput.value);

    // Store product in cart
    addToCart(title, imageSrc, quantity);

    // Reset quantity input to 1
    quantityInput.value = 1;

    // Update cart icon
    updateCartIcon();

    // Save cart details to local storage
    saveCartToLocalStorage();

    // Update cart dropdown
    updateCartDropdown(); // Add this line to update the dropdown immediately after adding an item to the cart
}

// Function to add a product to the cart or increment its quantity if already exists
function addToCart(title, imageSrc, quantity) {
    // Check if the item already exists in the cart
    const existingItemIndex = cart.findIndex(item => item.title === title);
    
    if (existingItemIndex !== -1) {
        // If the item exists, increment its quantity
        cart[existingItemIndex].quantity += quantity;
    } else {
        // If the item doesn't exist, add it to the cart
        const product = { title: title, image: imageSrc, quantity: quantity };
        cart.push(product);
    }
}

// Function to remove a product from the cart or decrement its quantity
function removeFromCart(index) {
    // Remove the item from the cart array
    const removedItem = cart.splice(index, 1)[0];

    // Update cart in local storage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Update cart icon
    updateCartIcon();

    // Update cart dropdown menu
    updateCartDropdown();

    // If the item was removed completely, update the product display
    if (removedItem) {
        displayItem(product);
    }
}

// Function to update the cart icon
function updateCartIcon() {
    // Get the cart icon element
    const cartIcon = document.getElementById('cartIcon');
    // Update the cart item count
    const cartItemCount = document.getElementById('cartItemCount');
    cartItemCount.textContent = getTotalItemCount(); // You need to implement this function
    cartItemCount.style.display = 'inline'; // Show the cart count
}


// Function to calculate the total number of items in the cart
function getTotalItemCount() {
    let totalCount = 0;
    // Iterate through the cart array and sum up the quantities
    cart.forEach(product => {
        totalCount += product.quantity;
    });
    return totalCount;
}

// Function to save cart details to local storage
function saveCartToLocalStorage() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

// Add an event listener for when the DOM content is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Retrieve cart data from localStorage
    const storedCart = JSON.parse(localStorage.getItem('cart'));
    if (storedCart && storedCart.length > 0) {
        // If there is stored cart data, update the cart count accordingly
        cart = storedCart;
        updateCartIcon();
    }
    // Show the cart count after updating it
    document.getElementById('cartItemCount').style.display = 'inline';
});

// Call updateCartIcon when the page loads to initially set the cart count
document.addEventListener('DOMContentLoaded', function() {
  updateCartIcon();
});


// Function to get cart items with delete buttons
function getCartItemsWithDeleteButtons(cart) {
    let itemsHTML = '';
    const groupedCart = groupCartItems(cart); // Group cart items by title

    // Construct HTML with grouped item details and delete buttons
    groupedCart.forEach((item, index) => {
        itemsHTML += `<div class="dropdown-item item-container" data-index="${index}">
            <img class="cart-img" src="${item.image}" alt="${item.title}">
            <div class="item-details">
                <div class="item-title">${item.title}<span class="item-quantity"> x ${item.quantity}<span></div>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" fill="#8b0000" class="delete-icon bi bi-trash" viewBox="0 0 16 16">
                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
            </svg>
        </div>`;
    });

    return itemsHTML;
}


// Function to group cart items by title and sum their quantities
function groupCartItems(cart) {
    const groupedCart = [];
    cart.forEach(item => {
        const existingItemIndex = groupedCart.findIndex(groupedItem => groupedItem.title === item.title);
        if (existingItemIndex !== -1) {
            // If item already exists in groupedCart, increment its quantity
            groupedCart[existingItemIndex].quantity += item.quantity;
        } else {
            // If item doesn't exist, add it to groupedCart
            groupedCart.push({ title: item.title, image: item.image, quantity: item.quantity });
        }
    });
    return groupedCart;
}
               // Function to update cart dropdown menu
function updateCartDropdown() {
    const cartDropdownMenu = document.getElementById('cartDropdownMenu');
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    if (cart.length === 0) {
        cartDropdownMenu.innerHTML = `<div class="empty-cart">Your cart is empty !!</div>`;
        const emptycarthr= document.getElementById('dropdown-divider');
        emptycarthr.remove();
        // Disable links for "View Cart" and "Proceed to Checkout"
        document.getElementById('viewCartLink').classList.add('disabled');
        document.getElementById('checkoutLink').classList.add('disabled');
    } else {
        cartDropdownMenu.innerHTML = getCartItemsWithDeleteButtons(cart);
        // Enable links for "View Cart" and "Proceed to Checkout"
        document.getElementById('viewCartLink').classList.remove('disabled');
        document.getElementById('checkoutLink').classList.remove('disabled');
    }
}


// Add event listener to delete buttons using event delegation
document.getElementById('cartDropdownMenu').addEventListener('click', function(event) {
    if (event.target.classList.contains('delete-icon')) {
        const itemIndex = event.target.parentElement.dataset.index;
        removeFromCart(itemIndex); // Call removeFromCart function to remove item from cart
    }
});

        // Display initial cart items with delete buttons
        updateCartDropdown();



// Get all buttons with class 'myButton'
var buttons = document.querySelectorAll('.btn');

// Loop through each button and add a click event listener
buttons.forEach(function(button) {
    button.addEventListener('click', function() {
        // Add the 'clicked' class to the button
        this.classList.add('clicked');

        // Remove the 'clicked' class after 100 milliseconds (adjust as needed)
        var that = this;
        setTimeout(function() {
            that.classList.remove('clicked');
        }, 100);
    });
});

// // Listen for the window focus event
// window.addEventListener('load', function() {
//   // Refresh the cart data here
//   updateCartIcon();
// });

// // Add an event listener for the 'pageshow' event
// window.addEventListener('pageshow', function(event) {
//     // Check if the event's persisted property is false (indicating a fresh load or reload)
//     if (!event.persisted) {
//         // Update cart content
//         updateCartDropdown();
//         updateCartIcon();
//     }
// });


// Add event listener for the 'popstate' event
window.addEventListener('popstate', function(event) {
    // Check if the state change indicates a navigation back to the page where the cart was modified
    if (event.state && event.state.page === 'cartPage') {
        // Update the cart based on stored data
        updateCartFromLocalStorage();
    }
});

// Function to update the cart from local storage
function updateCartFromLocalStorage() {
    const savedCart = localStorage.getItem('cart');
    if (savedCart) {
        cart = JSON.parse(savedCart);
        // Update the cart icon or cart display as needed
        updateCartIcon(); // Assuming this function updates the cart icon
    }
}

</script>
<!-- HoverSignal -->
<script type="text/javascript" >
    (function (d, w) {
    var n = d.getElementsByTagName("script")[0],
    s = d.createElement("script"),
    f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = "https://app.hoversignal.com/Api/Script/304c6c0b-b273-4839-aba9-55f4b90728ab";
    if (w.opera == "[object Opera]") {
    d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
    })(document, window);
    </script>
    <!-- /Hoversignal -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script> -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="./index.js"></script>
</body>
</html>